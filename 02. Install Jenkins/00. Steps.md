# The below Steps to Install Jenkins using Helm and Enable Ingress

### Switch to the Jenkins namespace

> kubectl config set-context --current --namespace=jenkins

### Create Storage Class, PV and PVC for Jenkins
> Refert to SC-Jenkins, PV-Jenkins, PVC-Jenkins yaml files in the same directory

---
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: jenkins-sc
provisioner: kubernetes.io/no-provisioner
volumeBindingMode: WaitForFirstConsumer

---

### Create values.yaml and jenkins-casc.yaml
> Refert to values yaml files in the same directory

### Install Jenkins using helm
> helm repo add Jenkins https://charts.jenkins.io
> helm repo update
> helm install jenkins jenkins/jenkins -f jenkins-values.yaml --namespace jenkins

### Expose the Jenkins service to access
> kubectl port-forward service/jenkins 8080:8080 --namespace jenkins

### Configure Ingress to be accessible outside
> kubectl apply -f jenkins-ingress.yaml
> Refert to jenkins-ingress.yaml file in the same directory
> Add in the hosts file the worker node public IP and the hostname
> curl -kv -H "Host: jenkins.atostask.com" http://"workernodeprivateip		

### Retrieve the initial admin password  
> kubectl exec --namespace jenkins -it svc/jenkins -c jenkins -- /bin/cat /run/secrets/additional/chart-admin-password && echo

#### troubleshooting Tips:
> Make sure that you give the correct permission to the config file 
> sudo chmod 644 /var/lib/kubelet/config.yaml

> Make Sure All Instances in the same VPC and can connect to each other

> If you face any errors you get the logs and the description of the failed pods
> kubectl logs jenkins-0 -c init -n Jenkins
> kubectl decribe pods jenkins-0
